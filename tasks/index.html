<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Тренажёр задач</title>
  <link rel="stylesheet" href="./tasks.css">
</head>
<body>
  <header class="top">
    <div class="brand">Тренажёр задач</div>
    <div class="spacer"></div>
    <div class="user">
      <input id="studentName" placeholder="Имя и фамилия" />
      <input id="studentEmail" placeholder="Email (необязательно)" />
      <button id="saveUser">Сохранить</button>
    </div>
  </header>

  <main>
    <!-- Шаг 1: выбор тем/типов -->
    <section id="picker">
      <div class="panel">
        <h1>1. Планиметрия → 1.1. Центральные и вписанные углы</h1>
        <div class="controls">
          <button id="btnAll">Выбрать всё</button>
          <button id="btnNone">Снять всё</button>
          <button data-preset="1" class="preset">По 1 на тип</button>
          <button data-preset="2" class="preset">По 2 на тип</button>
        </div>
        <table id="types">
          <thead>
            <tr><th style="width:36px"></th><th>Тип</th><th>Картинка</th><th>Доступно</th><th>Взять</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="footer">
          <label><input type="checkbox" id="shuffle" checked> Перемешать задачи</label>
          <div class="sum">Итого: <span id="sum">0</span></div>
          <button id="start" disabled>Начать</button>
        </div>
      </div>
    </section>

    <!-- Шаг 2: сессия -->
    <section id="runner" class="hidden">
      <div class="panel">
        <div class="run-head">
          <div class="crumb"><span id="topicTitle"></span></div>
          <div class="progress"><span id="idx">1</span>/<span id="total">1</span></div>
          <div class="timer"><span id="tmin">00</span>:<span id="tsec">00</span></div>
        </div>
        <div class="qwrap">
          <div class="qtext" id="stem"></div>
          <div class="qfig"><img id="figure" alt=""></div>
        </div>
        <div class="answer">
          <input id="answer" placeholder="Ответ" autocomplete="off">
          <button id="check">Проверить</button>
        </div>
        <div class="result" id="result"></div>
        <div class="nav">
          <button id="prev">Назад</button>
          <button id="skip">Пропустить</button>
          <button id="next">Далее</button>
          <button id="finish">Завершить</button>
        </div>
      </div>
    </section>

    <!-- Шаг 3: итог -->
    <section id="summary" class="hidden">
      <div class="panel">
        <h2>Сессия завершена</h2>
        <div id="stats"></div>
        <div class="actions">
          <button id="restart">Новая сессия</button>
          <a id="exportCsv" href="#" download="tasks_session.csv">Экспорт CSV</a>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="./tasks.js"></script>
</body>
</html>
