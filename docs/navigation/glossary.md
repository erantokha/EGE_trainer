# Глоссарий

Дата обновления: 2026-01-10

Термины ниже используются в коде и документации.

- прототип
  - базовый шаблон задачи (формулировка + параметры + ответ), от которого строятся варианты

- аналог
  - вариант прототипа с другими параметрами/ответом (часто отличается числом, точкой на графике и т.п.)

- topic / subtopic
  - тема и подтема в классификации задач (например, 11.8.1)

- unic
  - флаг, что задача/прототип должен встречаться без повторений в рамках генерации (логика зависит от picker/trainer)

- attempt
  - запись попытки решения задачи вне ДЗ (таблица `attempts`)

- homework
  - сущность домашнего задания учителя (таблица `homeworks`)

- homework_link
  - токенизированная ссылка на домашку (таблица `homework_links`), обычно открывается ученику

- token
  - строка в URL, по которой ученик открывает ДЗ; хранится в `homework_links.token`

- homework_attempt
  - попытка сдачи домашки (таблица `homework_attempts`), включает payload с ответами и результат

- payload
  - jsonb с ответами/деталями сдачи (в `homework_attempts.payload` и в RPC submit_homework_attempt)

- answer_event
  - событие ответа в едином журнале для статистики (таблица `answer_events`)

- dashboard RPC
  - RPC, которая возвращает агрегированные данные для статистики (например, `student_dashboard_self`)

- RPC
  - функция в Postgres, которую вызывает фронт через PostgREST (/rest/v1/rpc/...) или supabase-js `.rpc()`

- SECURITY DEFINER
  - режим выполнения RPC с правами владельца функции; используется как “контролируемый шлюз” поверх RLS

- RLS
  - Row Level Security: политики доступа к строкам таблиц

- Auth
  - Supabase Auth (Google OAuth, email/password), управляет `auth.users` и токенами

- PKCE
  - механизм OAuth обмена code→token, чувствителен к “двойным finalize” и очистке URL параметров

- access_token
  - токен, которым подписываются запросы к PostgREST и RPC (Bearer)

- anon key
  - публичный ключ проекта, используется для неавторизованных запросов (без прав на приватные данные)

- service role key
  - ключ с расширенными правами (в фронте использовать нельзя)

- owner_id
  - идентификатор владельца (обычно `auth.uid()` учителя), используется в `homeworks`, `homework_links`

- student_id
  - идентификатор ученика (обычно `auth.uid()`), используется в `homework_attempts`, `answer_events`

- teacher_students
  - таблица связей учитель↔ученик (доступ учителя к статистике ученика)

- profile_completed
  - флаг/состояние, что профиль заполнен и можно пропускать страницу google_complete (см. `profiles`)

- cache-busting ?v=
  - параметр версии в URL скриптов/модулей, чтобы обновление файлов не ломалось из-за кеша

- PostgREST
  - REST слой Supabase над таблицами и RPC (endpoints вида /rest/v1/...)

- trigger
  - триггер Postgres, который автоматически создаёт `answer_events` при вставке/обновлении попыток

