# Папка app/ui (L1)

Назначение

- общий UI для всех страниц
- навигация, логин/логаут, отображение имени пользователя

Состав

- [app/ui/header.js](../../../app/ui/header.js)
  - initHeader: вставляет шапку в страницу, вешает обработчики кнопок
  - читает сессию Supabase, подтягивает профиль (profiles)
  - переключает видимость пунктов меню по роли (учитель/ученик)
  - хранит небольшие кэши (например, имя) в sessionStorage

Кто использует

- большинство страниц в [tasks/](../../../tasks/) вызывают initHeader (обычно в начале своего .js)

Точки расширения

- добавить новый пункт меню:
  - править header.js
  - убедиться, что страница существует в [tasks/](../../../tasks/)
- изменить логику отображения по ролям:
  - править header.js и правила роли/профиля (см. [tasks/google_complete.js](../../../tasks/google_complete.js))

Тонкости/риски

- важно, чтобы шапка инициализировалась достаточно рано, иначе OAuth‑параметры в URL могут мешать другим скриптам
- нельзя делать “скрытие прав” только на фронте: ограничения должны быть в RLS/RPC на Supabase (см. [docs/navigation/supabase.md](../supabase.md))

Дата обновления: 2026-01-10
