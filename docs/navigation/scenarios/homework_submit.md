
# Отправка ответов и завершение ДЗ

Предусловия
- есть attempt_id (создан start_homework_attempt)

Шаги пользователя
1) решить задачи
2) нажать “Завершить”
3) увидеть экран результата (правильно/неправильно)

Внутренние шаги
- ../../../tasks/hw.js: собирает payload ответов и метрики
- ../../../app/providers/homework.js: submitHomeworkAttempt → rpc submit_homework_attempt

Запросы к Supabase
- rpc submit_homework_attempt (write homework_attempts)

Итоговые состояния
- в homework_attempts сохранены ответы и итоги (correct/total/duration)

Типовые поломки и где чинить
- кнопка “Завершить” срабатывает не всегда:
  - гонки/двойные клики/несколько обработчиков
  - чинить: hw.js (идемпотентность, disable кнопки, единый submit)

Приёмка
- повторный заход по ссылке показывает сохранённый результат, а не даёт сдавать заново (если так задумано)
