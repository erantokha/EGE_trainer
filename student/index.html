<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</title>
  <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—â—É—é —Ç—ë–º–Ω—É—é —Ç–µ–º—É –∞–¥–º–∏–Ω–∫–∏ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è -->
  <link rel="stylesheet" href="../admin/admin.css">
  <style>
    .metrics{display:grid;grid-template-columns:1fr;gap:10px}
    @media (min-width:900px){ .metrics{grid-template-columns:repeat(4,1fr)} }
    .metric{background:#0b0f14;border:1px solid var(--border);border-radius:10px;padding:12px}
    .metric h4{margin:0 0 6px 0;font-size:14px;color:#9ca3af}
    .metric .val{font-size:20px;font-weight:600}
    .topic-list{display:grid;grid-template-columns:1fr;gap:8px}
    @media (min-width:900px){ .topic-list{grid-template-columns:1fr 1fr} }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="header">
      <div class="brand">üéì –ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
      <div class="header-actions">
        <span id="status" class="pill pill-muted">‚Äî</span>
      </div>
    </header>

    <section class="panel">
      <h2>–ö–æ–¥ —É—á–µ–Ω–∏–∫–∞</h2>
      <p class="muted">–≠—Ç–æ—Ç –∫–æ–¥ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ï–≥–æ –≤–∏–¥–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ —É –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏.</p>
      <div class="row">
        <input id="studentId" class="input" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: u_ab12cd" />
        <button id="btnSave" class="btn">–ó–∞–ø–æ–º–Ω–∏—Ç—å</button>
        <button id="btnLoadLocal" class="btn secondary">–ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å –∏–∑ —Ç—Ä–µ–Ω–∞–∂—ë—Ä–∞</button>
      </div>
      <p id="hint" class="muted"></p>
    </section>

    <section id="summary" class="panel hidden">
      <h2>–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
      <div class="metrics">
        <div class="metric"><h4>–í—Å–µ–≥–æ –≤–µ—Ä–Ω–æ / –∏–∑ –≤—Å–µ—Ö</h4><div class="val"><span id="mTotalOk">0</span> / <span id="mTotalAll">0</span></div></div>
        <div class="metric"><h4>–¢–æ—á–Ω–æ—Å—Ç—å</h4><div class="val" id="mAccuracy">0%</div></div>
        <div class="metric"><h4>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 10: –≤–µ—Ä–Ω–æ / –æ—à–∏–±–∫–∏</h4><div class="val"><span id="mLastOk">0</span> / <span id="mLastErr">0</span></div></div>
        <div class="metric"><h4>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10)</h4><div class="val" id="mLastAvg">00:00</div></div>
      </div>
    </section>

    <section id="topicsSec" class="panel hidden">
      <h3>–¢–æ—á–Ω–æ—Å—Ç—å –ø–æ —Ç–µ–º–∞–º</h3>
      <div id="topicsList" class="topic-list"></div>
    </section>

    <section id="tableSec" class="panel hidden">
      <div class="row" style="gap:10px;margin-bottom:6px">
        <button id="exportCSV" class="btn secondary">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
        <button id="exportJSON" class="btn secondary">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
        <span id="countInfo" class="pill pill-muted">‚Äî</span>
      </div>
      <div class="table-wrap">
        <table class="table" id="t">
          <thead>
            <tr>
              <th>ID</th>
              <th>–ò–º—è</th>
              <th>–¢–µ–º—ã</th>
              <th>–í–µ—Ä–Ω–æ</th>
              <th>–í—Å–µ–≥–æ</th>
              <th>%</th>
              <th>–°—Ä–µ–¥–Ω–µ–µ</th>
              <th>–î–ª–∏—Ç.</th>
              <th>–î–∞—Ç–∞</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </section>

    <footer class="footer">
      <a href="../public/" target="_blank">‚Üó –û—Ç–∫—Ä—ã—Ç—å —Ç—Ä–µ–Ω–∞–∂—ë—Ä</a>
    </footer>
  </div>

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- –ù–∞—à –∫–æ–¥ -->
  <script type="module" src="./student.js"></script>
</body>
</html>
